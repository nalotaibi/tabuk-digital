<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<link rel="apple-touch-icon" href="1024.png">
<link rel="icon" href="1024.png">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØºÙŠØ§Ø¨</title>

<style>
:root{
--primary:#006699;
--secondary:#00aed9;
--safe:#22c55e;
--warning:#facc15;
--orange:#fb923c;
--danger:#ef4444;
--bg-gradient:linear-gradient(135deg,#e6f4f8 0%,#ffffff 100%);
--info-modal-bg:#1F2937;
--info-modal-text:#F8FAFC;
--info-modal-accent:#0EA5E9;
}

body{
margin:0;font-family:'Segoe UI',Tahoma,sans-serif;
background:var(--bg-gradient);padding:20px 10px;direction:rtl;
}

.app-container{max-width:450px;margin:auto}

.info-icon{
display:inline-flex;align-items:center;justify-content:center;
width:18px;height:18px;border-radius:50%;
background:var(--info-modal-accent);color:#fff;font-weight:900;
cursor:pointer;font-size:.75rem;
}

.info-icon.warn{background:var(--orange)}
.info-icon.danger{background:var(--danger)}

.info-overlay{
display:none;position:fixed;inset:0;
background:rgba(15,23,42,.55);z-index:9999;
justify-content:center;align-items:center
}

.info-modal{
background:var(--info-modal-bg);color:var(--info-modal-text);
border-radius:18px;width:90%;max-width:360px;padding:15px
}

.info-ok{
background:var(--info-modal-accent);border:none;color:white;
padding:10px;border-radius:12px;width:100%;font-weight:bold
}

.course-card{background:#fff;border-radius:22px;padding:18px;margin-bottom:15px}
.result-area{border-radius:16px;padding:12px;margin-top:10px;text-align:center}
.safe-bg{background:#f0fdf4}
.warning-bg{background:#fffbeb}
.danger-bg{background:#fef2f2}
.progress-bar{height:6px;background:#ddd;border-radius:6px;overflow:hidden}
.progress-fill{height:100%}
</style>
</head>

<body>

<!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø© -->
<div id="infoOverlay" class="info-overlay" onclick="closeInfoModal()">
<div class="info-modal" onclick="event.stopPropagation()">
<div id="infoText"></div>
<br>
<button class="info-ok" onclick="closeInfoModal()">ÙÙ‡Ù…Øª</button>
</div>
</div>

<div class="app-container">

<button onclick="addNewCourse()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø±Ø±</button>
<div id="coursesList"></div>

</div>

<script>
let courses=JSON.parse(localStorage.getItem('myCourses'))||[];

function addNewCourse(){
courses.push({id:Date.now(),name:'Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ø±Ø±',weeklyHours:1,absent1:'',absent2:''});
renderCourses();
}

function openInfoModal(html){
document.getElementById("infoText").innerHTML=html;
document.getElementById("infoOverlay").style.display="flex";
}

function closeInfoModal(){
document.getElementById("infoOverlay").style.display="none";
}

function openLimitInfo(weeklyH,limit){
const total=weeklyH*16;
const fixed=Number(limit).toFixed(1);

const text=`
ğŸ“˜ <b>Ø·Ø±ÙŠÙ‚Ø© Ø­Ø³Ø§Ø¨ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø­Ø±Ù…Ø§Ù†:</b><br><br>
â€¢ Ù…Ø¬Ù…ÙˆØ¹ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø± Ø®Ù„Ø§Ù„ 16 Ø£Ø³Ø¨ÙˆØ¹ = <b>${weeklyH}</b> Ã— <b>16</b> = <b>${total}</b> Ø³Ø§Ø¹Ø©<br>
â€¢ Ø­Ø¯ Ø§Ù„Ø­Ø±Ù…Ø§Ù† = <b>20%</b> Ù…Ù† Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø§Ø¹Ø§Øª<br>
â€¢ Ø¥Ø°Ù† Ø­Ø¯ Ø§Ù„Ø­Ø±Ù…Ø§Ù† = <b>${fixed}</b> Ø³Ø§Ø¹Ø©
`;

openInfoModal(text);
}

function renderCourses(){
const list=document.getElementById("coursesList");
list.innerHTML="";

courses.forEach(c=>{
const wh=parseFloat(c.weeklyHours)||0;
const total=wh*16;
const limit=total*.2;
const absent=(parseFloat(c.absent1)||0)+((parseFloat(c.absent2)||0)*2);
const percent=(absent/total)*100||0;

let cls="safe-bg",msg="ğŸŸ¢ ÙˆØ¶Ø¹Ùƒ Ø¢Ù…Ù†",ic="";
if(absent>limit){cls="danger-bg";msg="ğŸ”´ Ø­Ø±Ù…Ø§Ù†";ic="danger"}
else if(percent>=15){cls="warning-bg";msg="ğŸŸ  Ø§Ù‚ØªØ±Ø¨Øª";ic="warn"}

const div=document.createElement("div");
div.className="course-card";
div.innerHTML=`
<input value="${c.name}" onchange="c.name=this.value">
<br>
<select onchange="c.weeklyHours=this.value;renderCourses()">
${[1,2,3,4].map(h=>`<option ${h==wh?"selected":""}>${h}</option>`)}
</select>
<br>
ØºÙŠØ§Ø¨ Ø³Ø§Ø¹Ø©:
<input value="${c.absent1}" oninput="c.absent1=this.value;renderCourses()">
ØºÙŠØ§Ø¨ Ø³Ø§Ø¹ØªÙŠÙ†:
<input value="${c.absent2}" oninput="c.absent2=this.value;renderCourses()">

<div class="result-area ${cls}">
${msg}<br>
${percent.toFixed(1)}%
<div class="progress-bar">
<div class="progress-fill" style="width:${Math.min(percent/20*100,100)}%;background:${ic=='danger'?'#ef4444':ic=='warn'?'#fb923c':'#22c55e'}"></div>
</div>

Ø­Ø¯ Ø§Ù„Ø­Ø±Ù…Ø§Ù†: ${limit.toFixed(1)} Ø³Ø§Ø¹Ø©
<span class="info-icon ${ic}" onclick="openLimitInfo(${wh},${limit})">i</span>
</div>
`;
list.appendChild(div);
});

localStorage.setItem("myCourses",JSON.stringify(courses));
}

renderCourses();
</script>

</body>
</html>
